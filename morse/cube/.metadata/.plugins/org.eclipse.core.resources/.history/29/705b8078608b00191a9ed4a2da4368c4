/*
 * morse.c
 *
 *  Created on: 09.06.2019
 *      Author: sercezar
 */

#include "main.h"
#include "morse.h"
#include<stdbool.h>




uint8_t DataToSend[40];
uint8_t MessageCounter = 0;
uint8_t MessageLength = 0;
_Bool CharArray[5];


void MainFunction(){
	/*
	 if (HAL_GPIO_ReadPin(Button_GPIO_Port, Button_Pin) == GPIO_PIN_SET) {
		  			HAL_Delay(100);
		  			if (HAL_GPIO_ReadPin(Button_GPIO_Port, Button_Pin) == GPIO_PIN_SET) {
		  				++MessageCounter;
		  				MessageLength = sprintf(DataToSend, "Wiadomosc nr %d\n\r", MessageCounter);
		  				CDC_Transmit_FS(DataToSend, MessageLength);
		  			}
		  		}
	 */
}

void GetChars(uint32_t PressCounter, uint8_t ArrIterator){
		if(PressCounter<3){
			CharArray[ArrIterator]=0;
		}
		else{
			CharArray[ArrIterator]=1;
		}
}


void ThrowWord(){
	if(CharArray[0]==0){
		 SendChar('a');
	}
	else if(CharArray[0]==1){
		SendChar('b');
	}
}

void SendChar(char X){
	if(X=='a') {
		++MessageCounter;
				  				MessageLength = sprintf(DataToSend, "Wiadomosc A nr %d\n\r", MessageCounter);
				  				CDC_Transmit_FS(DataToSend, MessageLength);
	}
	else if(X=='b'){
		++MessageCounter;
				  				MessageLength = sprintf(DataToSend, "Wiadomosc B nr %d\n\r", MessageCounter);
				  				CDC_Transmit_FS(DataToSend, MessageLength);
	}
}
